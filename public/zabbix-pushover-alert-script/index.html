<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Zabbix Pushover Alert script | Dennis Kruyt</title>
<meta name="keywords" content="pushover, notification, bash, dark, theme, zabbix, monitoring, alert" />
<meta name="description" content="At home and at work we are running Zabbix for monitoring, for alerting I use Pushover. There are some scripts that have Zabbix and Pushover integration on share.zabbix.com, but none of them have priority support and have inline image for Pushover.
On my GitHub you can find a alertscript for Zabbix and Pushover. Pushover has also a dark theme, but the Zabbix graphs are still light. So there is an option in the script to invert the graphs.">
<meta name="author" content="Dennis Kruyt">
<link rel="canonical" href="https://kruyt.org/zabbix-pushover-alert-script/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css" integrity="sha256-yIlj/i15RiAA/Q&#43;xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://kruyt.org/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://kruyt.org/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://kruyt.org/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://kruyt.org/apple-touch-icon.png">
<link rel="mask-icon" href="https://kruyt.org/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.89.4" />
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Zabbix Pushover Alert script" />
<meta property="og:description" content="At home and at work we are running Zabbix for monitoring, for alerting I use Pushover. There are some scripts that have Zabbix and Pushover integration on share.zabbix.com, but none of them have priority support and have inline image for Pushover.
On my GitHub you can find a alertscript for Zabbix and Pushover. Pushover has also a dark theme, but the Zabbix graphs are still light. So there is an option in the script to invert the graphs." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://kruyt.org/zabbix-pushover-alert-script/" />
<meta property="og:image" content="https://kruyt.org/images/2019/10/audio-blue-sky-daylight-776153_s.jpg" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2019-05-14T16:45:52&#43;00:00" />
<meta property="article:modified_time" content="2019-05-14T16:45:52&#43;00:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://kruyt.org/images/2019/10/audio-blue-sky-daylight-776153_s.jpg" />
<meta name="twitter:title" content="Zabbix Pushover Alert script"/>
<meta name="twitter:description" content="At home and at work we are running Zabbix for monitoring, for alerting I use Pushover. There are some scripts that have Zabbix and Pushover integration on share.zabbix.com, but none of them have priority support and have inline image for Pushover.
On my GitHub you can find a alertscript for Zabbix and Pushover. Pushover has also a dark theme, but the Zabbix graphs are still light. So there is an option in the script to invert the graphs."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://kruyt.org/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Zabbix Pushover Alert script",
      "item": "https://kruyt.org/zabbix-pushover-alert-script/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Zabbix Pushover Alert script",
  "name": "Zabbix Pushover Alert script",
  "description": "At home and at work we are running Zabbix for monitoring, for alerting I use Pushover. There are some scripts that have Zabbix and Pushover integration on share.zabbix.com, but none of them have priority support and have inline image for Pushover.\nOn my GitHub you can find a alertscript for Zabbix and Pushover. Pushover has also a dark theme, but the Zabbix graphs are still light. So there is an option in the script to invert the graphs.",
  "keywords": [
    "pushover", "notification", "bash", "dark", "theme", "zabbix", "monitoring", "alert"
  ],
  "articleBody": "At home and at work we are running Zabbix for monitoring, for alerting I use Pushover. There are some scripts that have Zabbix and Pushover integration on share.zabbix.com, but none of them have priority support and have inline image for Pushover.\nOn my GitHub you can find a alertscript for Zabbix and Pushover. Pushover has also a dark theme, but the Zabbix graphs are still light. So there is an option in the script to invert the graphs. So it wont hurt your eyes so much at night when you have oncall.\n   cli usage notify_pushover.sh 'Pushover_Userkey|Pushover_apptoken' 'subject' 'message' Install Download or Clone the notify-pushover.sh from my GitHub and copy it to the AlertScriptsPath from /etc/zabbix/zabbix_server.conf\nAdjust the following configs in the script\n# Zabbix address ZBX_URL=\"https://zabbixserver\" # Zabbix credentials to login USERNAME=\"zabbixuser\" PASSWORD=\"password\" Optional adjust the following\n# Image time and size PERIOD=24h WIDTH=800 # invert image, better for black theme pushover and better for your eyes at night. INV=true Configure Actions Under configuration - actions in Zabbix create or change the notification messages to the following. The subject wil be used for the Pushover Priority. These Priority levels can be adjusted if needed in the bash script. Item Graphic will be used to extract an image from Zabbix en added to the Pushover message.\nOperations Default subject:\n{TRIGGER.SEVERITY}: {EVENT.NAME} Default message:\nHostname: {HOSTNAME} Problem: {TRIGGER.NAME}: Problem started at {EVENT.TIME} on {EVENT.DATE} Severity: {EVENT.SEVERITY} Last tested value: {{HOSTNAME}:{TRIGGER.KEY}.last(0)} Item values: {ITEM.NAME1} ({HOST.NAME1}): {ITEM.VALUE1} Item Graphic: [{ITEM.ID1}] Recovery operations Default subject:\nResolved: {EVENT.NAME} Default message:\nHostname: {HOSTNAME} Problem name: {EVENT.NAME} Problem status: {STATUS} Last tested value: {{HOSTNAME}:{TRIGGER.KEY}.last(0)} Item values: {ITEM.NAME1} ({HOST.NAME1}): {ITEM.VALUE1} Update operations Default subject:\nUpdated problem: {EVENT.NAME} Default message:\n{USER.FULLNAME} {EVENT.UPDATE.ACTION} problem at {EVENT.UPDATE.DATE} {EVENT.UPDATE.TIME}. {EVENT.UPDATE.MESSAGE} Current problem status is {EVENT.STATUS}, acknowledged: {EVENT.ACK.STATUS}. Configure media type Under Administration - Media in Zabbix add a new media. Specify the name of the script in script name and check that the parameters are correct.\n  Configure user media You will need then to add the media to your users. For this just edit an user and add a media selecting the one you just created before. Specify the UserKey and AppToken in the Send to field, separated by a | .\n  ",
  "wordCount" : "369",
  "inLanguage": "en",
  "image":"https://kruyt.org/images/2019/10/audio-blue-sky-daylight-776153_s.jpg","datePublished": "2019-05-14T16:45:52Z",
  "dateModified": "2019-05-14T16:45:52Z",
  "author":{
    "@type": "Person",
    "name": "Dennis Kruyt"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://kruyt.org/zabbix-pushover-alert-script/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Dennis Kruyt",
    "logo": {
      "@type": "ImageObject",
      "url": "https://kruyt.org/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://kruyt.org/" accesskey="h" title="Dennis Kruyt (Alt + H)">Dennis Kruyt</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Zabbix Pushover Alert script
    </h1>
    <div class="post-meta"><span title='2019-05-14 16:45:52 +0000 UTC'>May 14, 2019</span>&nbsp;·&nbsp;Dennis Kruyt

</div>
  </header> 
<figure class="entry-cover"><img loading="lazy" src="https://kruyt.org/images/2019/10/audio-blue-sky-daylight-776153_s.jpg" alt="">
        
</figure>
  <div class="post-content"><p>At home and at work we are running Zabbix for monitoring, for alerting I use Pushover. There are some scripts that have Zabbix and Pushover integration on share.zabbix.com, but none of them have priority support and have inline image for Pushover.</p>
<p>On my <a href="https://github.com/dkruyt/zabbix-pushover">GitHub</a> you can find a alertscript for Zabbix and Pushover. Pushover has also a dark theme, but the Zabbix graphs are still light. So there is an option in the script to invert the graphs. So it wont hurt your eyes so much at night when you have oncall.</p>
<div class="container">
    <div style="float:left;width:49%">
	    <img src="https://github.com/dkruyt/resources/raw/master/pushover_ios_small01.png">
    </div>
    <div style="float:right;width:49%">
	    <img src="https://github.com/dkruyt/resources/raw/master/pushover_ios_small03.png">
    </div>
</div>
<h2 id="cli-usage">cli usage<a hidden class="anchor" aria-hidden="true" href="#cli-usage">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">notify_pushover.sh <span style="color:#e6db74">&#39;Pushover_Userkey|Pushover_apptoken&#39;</span> <span style="color:#e6db74">&#39;subject&#39;</span> <span style="color:#e6db74">&#39;message&#39;</span>

</code></pre></div><h2 id="install">Install<a hidden class="anchor" aria-hidden="true" href="#install">#</a></h2>
<p>Download or Clone the notify-pushover.sh from my <a href="https://github.com/dkruyt/zabbix-pushover">GitHub</a> and copy it  to the AlertScriptsPath from /etc/zabbix/zabbix_server.conf</p>
<p>Adjust the following configs in the script</p>
<pre tabindex="0"><code># Zabbix address
ZBX_URL=&quot;https://zabbixserver&quot;

# Zabbix credentials to login
USERNAME=&quot;zabbixuser&quot;
PASSWORD=&quot;password&quot;

</code></pre><p>Optional adjust the following</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Image time and size</span>
PERIOD<span style="color:#f92672">=</span>24h
WIDTH<span style="color:#f92672">=</span><span style="color:#ae81ff">800</span>
<span style="color:#75715e"># invert image, better for black theme pushover and better for your eyes at night.</span>
INV<span style="color:#f92672">=</span>true

</code></pre></div><h2 id="configure-actions">Configure Actions<a hidden class="anchor" aria-hidden="true" href="#configure-actions">#</a></h2>
<p>Under <em>configuration -&gt; actions</em> in Zabbix create or change the notification messages to the following. The subject wil be used for the Pushover Priority. These Priority levels can be adjusted if needed in the bash script. Item Graphic will be used to extract an image from Zabbix en added to the Pushover message.</p>
<h4 id="operations">Operations<a hidden class="anchor" aria-hidden="true" href="#operations">#</a></h4>
<p>Default subject:</p>
<pre tabindex="0"><code>{TRIGGER.SEVERITY}: {EVENT.NAME}

</code></pre><p>Default message:</p>
<pre tabindex="0"><code>Hostname: {HOSTNAME}
Problem: {TRIGGER.NAME}:
Problem started at {EVENT.TIME} on {EVENT.DATE}

Severity: {EVENT.SEVERITY}

Last tested value: {{HOSTNAME}:{TRIGGER.KEY}.last(0)}
Item values: {ITEM.NAME1} ({HOST.NAME1}): {ITEM.VALUE1}

Item Graphic: [{ITEM.ID1}]

</code></pre><h4 id="recovery-operations">Recovery operations<a hidden class="anchor" aria-hidden="true" href="#recovery-operations">#</a></h4>
<p>Default subject:</p>
<pre tabindex="0"><code>Resolved: {EVENT.NAME}

</code></pre><p>Default message:</p>
<pre tabindex="0"><code>Hostname: {HOSTNAME}
Problem name: {EVENT.NAME}
Problem status: {STATUS}

Last tested value: {{HOSTNAME}:{TRIGGER.KEY}.last(0)}
Item values: {ITEM.NAME1} ({HOST.NAME1}): {ITEM.VALUE1}

</code></pre><h4 id="update-operations">Update operations<a hidden class="anchor" aria-hidden="true" href="#update-operations">#</a></h4>
<p>Default subject:</p>
<pre tabindex="0"><code>Updated problem: {EVENT.NAME}

</code></pre><p>Default message:</p>
<pre tabindex="0"><code>{USER.FULLNAME} {EVENT.UPDATE.ACTION} problem at {EVENT.UPDATE.DATE} {EVENT.UPDATE.TIME}.

{EVENT.UPDATE.MESSAGE}

Current problem status is {EVENT.STATUS}, acknowledged: {EVENT.ACK.STATUS}.

</code></pre><h2 id="configure-media-type">Configure media type<a hidden class="anchor" aria-hidden="true" href="#configure-media-type">#</a></h2>
<p>Under <em>Administration -&gt; Media</em> in Zabbix add a new media. Specify the name of the script in script name and check that the parameters are correct.</p>
<figure>
    <img loading="lazy" src="https://github.com/dkruyt/resources/raw/master/zabbix-mediatype.png"/> 
</figure>

<h2 id="configure-user-media">Configure user media<a hidden class="anchor" aria-hidden="true" href="#configure-user-media">#</a></h2>
<p>You will need then to add the media to your users. For this just edit an user and add a media selecting the one you just created before. Specify the UserKey and AppToken in the Send to field, separated by a | .</p>
<figure>
    <img loading="lazy" src="https://github.com/dkruyt/resources/raw/master/zabbix-usermedia.png"/> 
</figure>



  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://kruyt.org/tags/pushover/">pushover</a></li>
      <li><a href="https://kruyt.org/tags/notification/">notification</a></li>
      <li><a href="https://kruyt.org/tags/bash/">bash</a></li>
      <li><a href="https://kruyt.org/tags/dark/">dark</a></li>
      <li><a href="https://kruyt.org/tags/theme/">theme</a></li>
      <li><a href="https://kruyt.org/tags/zabbix/">zabbix</a></li>
      <li><a href="https://kruyt.org/tags/monitoring/">monitoring</a></li>
      <li><a href="https://kruyt.org/tags/alert/">alert</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2021 <a href="https://kruyt.org/">Dennis Kruyt</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
