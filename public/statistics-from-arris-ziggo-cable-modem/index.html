<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Docsis stats from ARRIS Ziggo modem | Dennis Kruyt</title>
<meta name="keywords" content="connectbox, ziggo, docsis, influxdb, arris, cable, modem, statistics, grafana" />
<meta name="description" content="I have at home a Ziggo cable internet connection. The modem that Ziggo provides is a Arris modem. I have this modem in bridge mode because I have my own router. But I like to get some DOCSIS statistics from this modem. The modem provide these via a kind of web snmp output, but this is not very useful.
  Ziggo Connect box
  To parse this output into something more readable I create a crude oneliner script.">
<meta name="author" content="Dennis Kruyt">
<link rel="canonical" href="https://kruyt.org/statistics-from-arris-ziggo-cable-modem/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css" integrity="sha256-yIlj/i15RiAA/Q&#43;xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://kruyt.org/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://kruyt.org/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://kruyt.org/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://kruyt.org/apple-touch-icon.png">
<link rel="mask-icon" href="https://kruyt.org/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.89.4" />
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Docsis stats from ARRIS Ziggo modem" />
<meta property="og:description" content="I have at home a Ziggo cable internet connection. The modem that Ziggo provides is a Arris modem. I have this modem in bridge mode because I have my own router. But I like to get some DOCSIS statistics from this modem. The modem provide these via a kind of web snmp output, but this is not very useful.
  Ziggo Connect box
  To parse this output into something more readable I create a crude oneliner script." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://kruyt.org/statistics-from-arris-ziggo-cable-modem/" />
<meta property="og:image" content="https://kruyt.org/images/2019/10/photo-1568127558771-dad1b9d93a08_2.jpeg" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2019-08-16T14:53:00&#43;00:00" />
<meta property="article:modified_time" content="2019-08-16T14:53:00&#43;00:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://kruyt.org/images/2019/10/photo-1568127558771-dad1b9d93a08_2.jpeg" />
<meta name="twitter:title" content="Docsis stats from ARRIS Ziggo modem"/>
<meta name="twitter:description" content="I have at home a Ziggo cable internet connection. The modem that Ziggo provides is a Arris modem. I have this modem in bridge mode because I have my own router. But I like to get some DOCSIS statistics from this modem. The modem provide these via a kind of web snmp output, but this is not very useful.
  Ziggo Connect box
  To parse this output into something more readable I create a crude oneliner script."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://kruyt.org/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Docsis stats from ARRIS Ziggo modem",
      "item": "https://kruyt.org/statistics-from-arris-ziggo-cable-modem/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Docsis stats from ARRIS Ziggo modem",
  "name": "Docsis stats from ARRIS Ziggo modem",
  "description": "I have at home a Ziggo cable internet connection. The modem that Ziggo provides is a Arris modem. I have this modem in bridge mode because I have my own router. But I like to get some DOCSIS statistics from this modem. The modem provide these via a kind of web snmp output, but this is not very useful.\n  Ziggo Connect box\n  To parse this output into something more readable I create a crude oneliner script.",
  "keywords": [
    "connectbox", "ziggo", "docsis", "influxdb", "arris", "cable", "modem", "statistics", "grafana"
  ],
  "articleBody": "I have at home a Ziggo cable internet connection. The modem that Ziggo provides is a Arris modem. I have this modem in bridge mode because I have my own router. But I like to get some DOCSIS statistics from this modem. The modem provide these via a kind of web snmp output, but this is not very useful.\n  Ziggo Connect box\n  To parse this output into something more readable I create a crude oneliner script. This scripts export the DOCIS statistics from the ARRIS cable modem to CSV. Replace the IP with your cable modem IP. If you are using bridge mode then probably you have the same ip as in the script below.\nPlace the file in the directory /etc/telegraf/telegraf.d/arrisstatus.sh and make it executable (chmod +x arrisstatus.sh) __\n#!/bin/bash  echo \"measurement,channel,value\" curl -s 'https://192.168.100.1/getRouterStatus' --compressed --insecure | sed s/1.3.6.1.2.1.10.127.1.1.1.1.1/docsIfDownChannelId/ | sed s/1.3.6.1.2.1.10.127.1.1.1.1.2/docsIfDownChannelFrequency/ | sed s/1.3.6.1.2.1.10.127.1.1.1.1.4/docsIfDownChannelModulation/ | sed s/1.3.6.1.2.1.10.127.1.1.1.1.6/docsIfDownChannelPower/ | sed s/1.3.6.1.2.1.10.127.1.1.2.1.1/docsIfUpChannelId/ | sed s/1.3.6.1.2.1.10.127.1.1.2.1.2/docsIfUpChannelFrequency/ | sed s/1.3.6.1.2.1.10.127.1.1.2.1.3/docsIfUpChannelWidth/ | sed s/1.3.6.1.2.1.10.127.1.1.2.1.15/docsIfUpChannelType/ | sed s/1.3.6.1.4.1.4115.1.3.4.1.9.2.1.2/arrisCmDoc30IfUpChannelExtendedSymbolRate/ | sed s/1.3.6.1.4.1.4115.1.3.4.1.9.2.1.3/arrisCmDoc30IfUpChannelExtendedModulation/ | sed s/1.3.6.1.4.1.4491.2.1.20.1.2.1.1/docsIf3CmStatusUsTxPower/ | sed s/1.3.6.1.4.1.4491.2.1.20.1.2.1.2/docsIf3CmStatusUsT3Timeouts/ | sed s/1.3.6.1.4.1.4491.2.1.20.1.2.1.3/docsIf3CmStatusUsT4Timeouts/ | sed s/1.3.6.1.4.1.4491.2.1.20.1.24.1.1/docsIf3SignalQualityExtRxMER/ | sed s/1.3.6.1.2.1.10.127.1.1.4.1.3/docsIfSigQCorrecteds/ | sed s/1.3.6.1.2.1.10.127.1.1.4.1.4/docsIfSigQUncorrectables/ | sed s/1.3.6.1.2.1.10.127.1.1.4.1.5/docsIfSigQSignalNoise/ | sed s/1.3.6.1.2.1.69.1.5.8.1.2/DevEvFirstTimeOid/ | sed s/1.3.6.1.2.1.69.1.5.8.1.5/DevEvId/ | sed s/1.3.6.1.2.1.69.1.5.8.1.7/DevEvText/ | sed s/1.3.6.1.2.1.126.1.1.1.1.1/docsBpi2CmPrivacyEnable/ | sed s/1.3.6.1.4.1.4491.2.1.21.1.3.1.8/docsQosServiceFlowPrimary/ | sed 's/\"//g' | sed 's/,$//g' | sed 's/\\./,/' | sed 's/:/,/' | grep \"^[a-z]\" Then create a cronjob for it that writes the CSV output every minute to a tmp file.\n* * * root\t/etc/telegraf/telegraf.d/arrisstatus.sh  /tmp/arris-status.csv I then use Telegraf to parse the CSV output and store the values in a InfluxDB database. The following config can be placed in the /etc/telegraf/telegraf.d directory. If you donâ€™t have the TIG stack running, see here for instructions to het this up and running.\n[[inputs.file]] files = [\"/tmp/arris-status.csv\"] data_format = \"csv\" csv_tag_columns = [\"channel\"] csv_header_row_count = 1 csv_measurement_column = \"measurement\" The following Grafana dashboard can be used to show all the graphs. Download the JSON file and import into Grafana. If you want to test the dashboard see a demo page on raintank.io.\n  Grafana dashboard\n  Now you can keep an eye on the signal values ðŸ˜‰. Below you can see the downstream power signals changing after a scheduled Ziggo maintenance in my neighbourhood.\n  Ziggo maintenance\n  ",
  "wordCount" : "369",
  "inLanguage": "en",
  "image":"https://kruyt.org/images/2019/10/photo-1568127558771-dad1b9d93a08_2.jpeg","datePublished": "2019-08-16T14:53:00Z",
  "dateModified": "2019-08-16T14:53:00Z",
  "author":{
    "@type": "Person",
    "name": "Dennis Kruyt"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://kruyt.org/statistics-from-arris-ziggo-cable-modem/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Dennis Kruyt",
    "logo": {
      "@type": "ImageObject",
      "url": "https://kruyt.org/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://kruyt.org/" accesskey="h" title="Dennis Kruyt (Alt + H)">Dennis Kruyt</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Docsis stats from ARRIS Ziggo modem
    </h1>
    <div class="post-meta"><span title='2019-08-16 14:53:00 +0000 UTC'>August 16, 2019</span>&nbsp;Â·&nbsp;Dennis Kruyt

</div>
  </header> 
<figure class="entry-cover"><img loading="lazy" src="https://kruyt.org/images/2019/10/photo-1568127558771-dad1b9d93a08_2.jpeg" alt="">
        
</figure>
  <div class="post-content"><p>I have at home a Ziggo cable internet connection. The modem that Ziggo provides is a Arris modem. I have this modem in bridge mode because I have my own router. But I like to get some DOCSIS statistics from this modem. The modem provide these via a kind of web snmp output, but this is not very useful.</p>
<figure>
    <img loading="lazy" src="/images/2019/08/1493642544207.png"
         alt="Ziggo Connect box"/> <figcaption>
            <p>Ziggo Connect box</p>
        </figcaption>
</figure>

<p>To parse this output into something more readable I create a crude oneliner script. This scripts export the DOCIS statistics from the ARRIS cable modem to CSV. Replace the IP with your cable modem IP. If you are using bridge mode then probably you have the same ip as in the script below.</p>
<p>Place the file in the directory <em>/etc/telegraf/telegraf.d/arrisstatus.sh</em> and make it executable (chmod +x arrisstatus.sh) __</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
echo <span style="color:#e6db74">&#34;measurement,channel,value&#34;</span>
curl -s <span style="color:#e6db74">&#39;https://192.168.100.1/getRouterStatus&#39;</span> --compressed --insecure | sed s/1.3.6.1.2.1.10.127.1.1.1.1.1/docsIfDownChannelId/ | sed s/1.3.6.1.2.1.10.127.1.1.1.1.2/docsIfDownChannelFrequency/ | sed s/1.3.6.1.2.1.10.127.1.1.1.1.4/docsIfDownChannelModulation/ | sed s/1.3.6.1.2.1.10.127.1.1.1.1.6/docsIfDownChannelPower/ | sed s/1.3.6.1.2.1.10.127.1.1.2.1.1/docsIfUpChannelId/ | sed s/1.3.6.1.2.1.10.127.1.1.2.1.2/docsIfUpChannelFrequency/ | sed s/1.3.6.1.2.1.10.127.1.1.2.1.3/docsIfUpChannelWidth/ | sed s/1.3.6.1.2.1.10.127.1.1.2.1.15/docsIfUpChannelType/ | sed s/1.3.6.1.4.1.4115.1.3.4.1.9.2.1.2/arrisCmDoc30IfUpChannelExtendedSymbolRate/ | sed s/1.3.6.1.4.1.4115.1.3.4.1.9.2.1.3/arrisCmDoc30IfUpChannelExtendedModulation/ | sed s/1.3.6.1.4.1.4491.2.1.20.1.2.1.1/docsIf3CmStatusUsTxPower/ | sed s/1.3.6.1.4.1.4491.2.1.20.1.2.1.2/docsIf3CmStatusUsT3Timeouts/ | sed s/1.3.6.1.4.1.4491.2.1.20.1.2.1.3/docsIf3CmStatusUsT4Timeouts/ | sed s/1.3.6.1.4.1.4491.2.1.20.1.24.1.1/docsIf3SignalQualityExtRxMER/ | sed s/1.3.6.1.2.1.10.127.1.1.4.1.3/docsIfSigQCorrecteds/ | sed s/1.3.6.1.2.1.10.127.1.1.4.1.4/docsIfSigQUncorrectables/ | sed s/1.3.6.1.2.1.10.127.1.1.4.1.5/docsIfSigQSignalNoise/ | sed s/1.3.6.1.2.1.69.1.5.8.1.2/DevEvFirstTimeOid/ | sed s/1.3.6.1.2.1.69.1.5.8.1.5/DevEvId/ | sed s/1.3.6.1.2.1.69.1.5.8.1.7/DevEvText/ | sed s/1.3.6.1.2.1.126.1.1.1.1.1/docsBpi2CmPrivacyEnable/ | sed s/1.3.6.1.4.1.4491.2.1.21.1.3.1.8/docsQosServiceFlowPrimary/ | sed <span style="color:#e6db74">&#39;s/&#34;//g&#39;</span> | sed <span style="color:#e6db74">&#39;s/,$//g&#39;</span> | sed <span style="color:#e6db74">&#39;s/\./,/&#39;</span> | sed <span style="color:#e6db74">&#39;s/:/,/&#39;</span> | grep <span style="color:#e6db74">&#34;^[a-z]&#34;</span>
</code></pre></div><p>Then create a cronjob for it that writes the CSV output every minute to a tmp file.</p>
<pre tabindex="0"><code>* * *     root	/etc/telegraf/telegraf.d/arrisstatus.sh &gt; /tmp/arris-status.csv
</code></pre><p>I then use <a href="https://www.influxdata.com/time-series-platform/telegraf/">Telegraf</a> to parse the CSV output and store the values in a <a href="https://www.influxdata.com/products/influxdb-overview/">InfluxDB</a> database. The following config can be placed in the <em>/etc/telegraf/telegraf.d</em> directory. If you don&rsquo;t have the TIG stack running, see <a href="https://www.howtoforge.com/tutorial/how-to-install-tig-stack-telegraf-influxdb-and-grafana-on-ubuntu-1804/">here</a> for instructions to het this up and running.</p>
<pre tabindex="0"><code>[[inputs.file]]
  files = [&quot;/tmp/arris-status.csv&quot;]
  data_format = &quot;csv&quot;
  csv_tag_columns = [&quot;channel&quot;]
  csv_header_row_count = 1
  csv_measurement_column = &quot;measurement&quot;
</code></pre><p>The following Grafana dashboard can be used to show all the graphs. <a href="https://gist.githubusercontent.com/dkruyt/c79dfb26ed771b14ed9ed43ff3aba8f8/raw/24e90a36dbc308e6ed3680a078ab5b0d453e3244/Ziggo_Arris_Modem-Grafana.json"><strong>Download the JSON file</strong></a> and import into <a href="https://grafana.com/">Grafana</a>. If you want to test the dashboard see a <a href="https://snapshot.raintank.io/dashboard/snapshot/whlaUYGSWr8ZUx1zLoS7JJKT97ErPH0v?orgId=2">demo page</a> on raintank.io.</p>
<figure>
    <img loading="lazy" src="/images/2019/08/screencapture-192-168-66-168-3000-d-27HkjgiWk-ziggo-arris-modem-2019-08-16-07_51_04.png"
         alt="Grafana dashboard"/> <figcaption>
            <p>Grafana dashboard</p>
        </figcaption>
</figure>

<p>Now you can keep an eye on the signal values ðŸ˜‰. Below you can see the downstream power signals changing after a scheduled Ziggo maintenance in my neighbourhood.</p>
<figure>
    <img loading="lazy" src="/images/2019/08/Screenshot-2019-08-16-at-16.20.31.png"
         alt="Ziggo maintenance"/> <figcaption>
            <p>Ziggo maintenance</p>
        </figcaption>
</figure>



  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://kruyt.org/tags/connectbox/">connectbox</a></li>
      <li><a href="https://kruyt.org/tags/ziggo/">ziggo</a></li>
      <li><a href="https://kruyt.org/tags/docsis/">docsis</a></li>
      <li><a href="https://kruyt.org/tags/influxdb/">influxdb</a></li>
      <li><a href="https://kruyt.org/tags/arris/">arris</a></li>
      <li><a href="https://kruyt.org/tags/cable/">cable</a></li>
      <li><a href="https://kruyt.org/tags/modem/">modem</a></li>
      <li><a href="https://kruyt.org/tags/statistics/">statistics</a></li>
      <li><a href="https://kruyt.org/tags/grafana/">grafana</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2021 <a href="https://kruyt.org/">Dennis Kruyt</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
